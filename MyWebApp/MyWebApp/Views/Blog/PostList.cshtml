@{
    @using MyWebApp.Models
@model List<Post>
Category category = Category.Wszystkie;
}


<div>
    <div>
        <div class="container  text-center mt-3"><a class="h1 font-weight-light">Mini blog</a></div>
        <div class="container  text-center  mt-2 mb-4"><a class="h-75 font-weight-light ">Tutaj poczytasz na tematy które mnie interesują i którymi chcę się podzielić z innymi</a></div>


    </div>




    <form method="post" class="container bg-transparent  text-center" style="border-radius: 25px 25px 25px 0px;  " asp-controller="Blog" asp-action="Filter" asp-route-category="@category">
        <label class=" font-weight-light mt-2" >Wybierz kategorię</label>
        <select asp-for="@category" style="background-color: #222838;  color: #a6adbe;"  asp-items="Html.GetEnumSelectList<Category>()" onchange="this.form.submit()"></select>
    </form>

    <div class="container mt-5">

        @foreach (Post p in Model)
        {
            if ((!p.IsProject && p.IsPublished) || (User.Identity.IsAuthenticated))
            {
                <div class="mt-4" style="background-color: #222838; border-radius:10px;">
                    <div class="container  text-center " style=" text-align: justify; word-wrap: break-word;padding-top:15px">
                        <a asp-action="Post" asp-route-id="@p.Id" class="h2 font-weight-light">@p.Title</a>
                    </div>

                    <div class="container  font-weight-light text-center h-75 " style=" word-wrap: break-word;">
                        <a>@p.ShortDescription</a>
                    </div>

                    <div class="container font-weight-light text-center h-75">
                        <a class="text-success ">Utworzony: @p.Created</a>

                    </div>
                    <div class="container  font-weight-light  text-center h-75 mb-4">
                        <a class="text-success">Kategoria: @p.Category</a>
                    </div>

                    <div class="text-right ">
                        <a class="btn btn-outline-primary  font-weight-light mb-2  mr-2" asp-action="Post" asp-route-id="@p.Id">Czytaj dalej</a>
                        @if (User.Identity.IsAuthenticated)
                        {
                            <a class="btn btn-outline-primary font-weight-light mb-2" asp-action="Edit" asp-controller="Blog" asp-route-id="@p.Id">Edytuj</a>
                            <button class="btn btn-outline-danger font-weight-light mb-2 mr-2" data-toggle="modal" data-target="#ModalRemove">Usuń</button>
                        }


                        <div class="modal fade" id="ModalRemove" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered " role="document">
                                <div class="modal-content" style="background-image: linear-gradient(to right,#fdfcfb ,#f5f7fa);">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="exampleModalLongTitle">Uwaga!</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            @*<span aria-hidden="true">&times;</span>*@
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        Czy napewno chcesz usunąć ten wpis?
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-success  font-weight-light" data-dismiss="modal">Anuluj</button>
                                        <a class="btn btn-outline-danger " asp-controller="Blog" asp-action="Remove" asp-route-id="@p.Id">Usuń</a>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                </div>
            }
        }








    </div>
    @if (User.Identity.IsAuthenticated)
    {
        <div class="container text-center mt-3 mb-3"> <a class="btn btn-outline-success  font-weight-light" asp-controller="Blog" asp-action="Create">Stwórz nowy post</a></div>
    }

    <div class="mt-4"></div>
</div>